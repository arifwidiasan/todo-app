
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>service: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/arifwidiasan/todo-app/service/access_service.go (100.0%)</option>
				
				<option value="file1">github.com/arifwidiasan/todo-app/service/activity_service.go (66.7%)</option>
				
				<option value="file2">github.com/arifwidiasan/todo-app/service/adapter.go (25.0%)</option>
				
				<option value="file3">github.com/arifwidiasan/todo-app/service/mock.go (91.7%)</option>
				
				<option value="file4">github.com/arifwidiasan/todo-app/service/task_service.go (100.0%)</option>
				
				<option value="file5">github.com/arifwidiasan/todo-app/service/user_service.go (30.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package service

import (
        "errors"

        "github.com/arifwidiasan/todo-app/model"
)

func (s *svcUser) CreateAccessService(user_id, activity_id uint, owner bool, access model.Access) error <span class="cov8" title="1">{
        access.Access_Owner = owner
        access.UserID = user_id
        access.ActivityID = activity_id

        return s.repo.CreateAccess(access)
}</span>

func (s *svcUser) CheckAcccessService(user_id, activity_id uint) error <span class="cov8" title="1">{
        _, err := s.repo.CheckAccess(user_id, activity_id)
        if err != nil </span><span class="cov8" title="1">{
                return errors.New("error")
        }</span>

        <span class="cov8" title="1">return nil</span>
}

func (s *svcUser) CheckAcccessOwnerService(user_id, activity_id uint) error <span class="cov8" title="1">{
        _, err := s.repo.CheckAccessOwner(user_id, activity_id)
        if err != nil </span><span class="cov8" title="1">{
                return errors.New("error")
        }</span>

        <span class="cov8" title="1">return nil</span>
}

func (s *svcUser) DeleteAllAccessService(activity_id int) error <span class="cov8" title="1">{
        return s.repo.DeleteAllAccess(activity_id)
}</span>

func (s *svcUser) GetAccessUserActivityService(activity_id int) []model.ListAccess <span class="cov8" title="1">{
        return s.repo.GetAccessUserActivity(activity_id)
}</span>

func (s *svcUser) DeleteOneAccessService(user_id, activity_id int) error <span class="cov8" title="1">{
        return s.repo.DeleteOneAccess(user_id, activity_id)
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package service

import (
        "strconv"
        "strings"

        "github.com/arifwidiasan/todo-app/model"
)

func (s *svcUser) CreateActivityService(activity model.Activity) error <span class="cov8" title="1">{
        return s.repo.CreateActivity(activity)
}</span>

func (s *svcUser) GetLatestActivityService() (model.Activity, error) <span class="cov8" title="1">{
        return s.repo.GetLatestActivity()
}</span>

func (s *svcUser) GetAllActivityService(username string) []model.Activity <span class="cov0" title="0">{
        user, _ := s.repo.GetUserByUsername(username)
        return s.repo.GetAllActivity(int(user.ID))
}</span>

func (s *svcUser) GetAllArchiveActivityService(username string) []model.Activity <span class="cov0" title="0">{
        user, _ := s.repo.GetUserByUsername(username)
        return s.repo.GetAllArchiveActivity(int(user.ID))
}</span>

func (s *svcUser) ReplaceActivityName(user_id int, activity model.Activity) model.Activity <span class="cov8" title="1">{
        activity.Activity_Name = strings.ReplaceAll(activity.Activity_Name, " ", "-") + "-" + strconv.Itoa(user_id)

        return activity
}</span>

func (s *svcUser) GetActivityByNameService(name string) (model.Activity, error) <span class="cov8" title="1">{
        return s.repo.GetActivityByName(name)
}</span>

func (s *svcUser) UpdateActivityService(id int, activity model.Activity) error <span class="cov8" title="1">{
        return s.repo.UpdateActivityByID(id, activity)
}</span>

func (s *svcUser) DeleteActivityByIDService(id int) error <span class="cov8" title="1">{
        return s.repo.DeleteActivityByID(id)
}</span>

func (s *svcUser) ArchiveActivityService(id int, activity model.Activity) error <span class="cov8" title="1">{
        return s.repo.ArchiveActivityByID(id, activity)
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">package service

import (
        "errors"

        "github.com/arifwidiasan/todo-app/config"
        "github.com/arifwidiasan/todo-app/domain"
)

type svcUser struct {
        c    config.Config
        repo domain.AdapterRepository
}

func (s *svcUser) CheckAuth(id, idToken int) error <span class="cov0" title="0">{
        if id != idToken </span><span class="cov0" title="0">{
                return errors.New("error")
        }</span>

        <span class="cov0" title="0">return nil</span>
}

func NewServiceUser(repo domain.AdapterRepository, c config.Config) domain.AdapterService <span class="cov8" title="1">{
        return &amp;svcUser{
                repo: repo,
                c:    c,
        }
}</span>
</pre>
		
		<pre class="file" id="file3" style="display: none">package service

import "github.com/arifwidiasan/todo-app/model"

type repoMock struct {
        createUser            func(user model.User) error
        getUserbyUsername     func(username string) (user model.User, err error)
        getUserbyID           func(id int) (user model.User, err error)
        createActivity        func(activity model.Activity) error
        getLatestActivity     func() (activity model.Activity, err error)
        replaceActivityName   func(user_id int, activity model.Activity) model.Activity
        getActivityByName     func(name string) (activity model.Activity, err error)
        updateActivityByID    func(id int, activity model.Activity) error
        deleteActivityByID    func(id int) error
        archiveActivityByID   func(id int, activity model.Activity) error
        createAccess          func(access model.Access) error
        checkAccess           func(user_id, activity_id uint) (access model.Access, err error)
        checkAccessOwner      func(user_id, activity_id uint) (access model.Access, err error)
        deleteAllAccess       func(activity_id int) error
        getAccessUserActivity func(activity_id int) []model.ListAccess
        deleteOneAccess       func(user_id, activity_id int) error
        createTask            func(task model.Task) error
        deleteAllTask         func(activity_id int) error
        getAllTask            func(activity_id int) []model.Task
        getTaskByID           func(id int) (task model.Task, err error)
        updateTaskByID        func(id int, task model.Task) error
        deleteTaskByID        func(id int) error
        completeTaskByID      func(id int, task model.Task) error
        getAllActivity        func(id_user int) []model.Activity
}

func (r *repoMock) CreateUsers(user model.User) error <span class="cov8" title="1">{
        return r.createUser(user)
}</span>
func (r *repoMock) GetUserByUsername(username string) (user model.User, err error) <span class="cov8" title="1">{
        return r.getUserbyUsername(username)
}</span>
func (r *repoMock) GetUserByID(id int) (user model.User, err error) <span class="cov8" title="1">{
        return r.getUserbyID(id)
}</span>

func (r *repoMock) CreateActivity(activity model.Activity) error <span class="cov8" title="1">{
        return r.createActivity(activity)
}</span>
func (r *repoMock) GetLatestActivity() (activity model.Activity, err error) <span class="cov8" title="1">{
        return r.getLatestActivity()
}</span>
func (r *repoMock) GetAllActivity(id_user int) []model.Activity <span class="cov0" title="0">{
        return r.getAllActivity(id_user)
}</span>
func (r *repoMock) GetAllArchiveActivity(id_user int) []model.Activity <span class="cov0" title="0">{
        panic("impl")</span>
}
func (r *repoMock) GetActivityByName(name string) (activity model.Activity, err error) <span class="cov8" title="1">{
        return r.getActivityByName(name)
}</span>
func (r *repoMock) UpdateActivityByID(id int, activity model.Activity) error <span class="cov8" title="1">{
        return r.updateActivityByID(id, activity)
}</span>
func (r *repoMock) DeleteActivityByID(id int) error <span class="cov8" title="1">{
        return r.deleteActivityByID(id)
}</span>
func (r *repoMock) ArchiveActivityByID(id int, activity model.Activity) error <span class="cov8" title="1">{
        return r.archiveActivityByID(id, activity)
}</span>

func (r *repoMock) CreateAccess(access model.Access) error <span class="cov8" title="1">{
        return r.createAccess(access)
}</span>
func (r *repoMock) CheckAccess(user_id, activity_id uint) (access model.Access, err error) <span class="cov8" title="1">{
        return r.checkAccess(user_id, activity_id)
}</span>
func (r *repoMock) CheckAccessOwner(user_id, activity_id uint) (access model.Access, err error) <span class="cov8" title="1">{
        return r.checkAccessOwner(user_id, activity_id)
}</span>
func (r *repoMock) DeleteAllAccess(activity_id int) error <span class="cov8" title="1">{
        return r.deleteAllAccess(activity_id)
}</span>
func (r *repoMock) GetAccessUserActivity(activity_id int) []model.ListAccess <span class="cov8" title="1">{
        return r.getAccessUserActivity(activity_id)
}</span>
func (r *repoMock) DeleteOneAccess(user_id, activity_id int) error <span class="cov8" title="1">{
        return r.deleteOneAccess(user_id, activity_id)
}</span>

func (r *repoMock) CreateTask(task model.Task) error <span class="cov8" title="1">{
        return r.createTask(task)
}</span>
func (r *repoMock) DeleteAllTask(activity_id int) error <span class="cov8" title="1">{
        return r.deleteAllTask(activity_id)
}</span>
func (r *repoMock) GetAllTask(activity_id int) []model.Task <span class="cov8" title="1">{
        return r.getAllTask(activity_id)
}</span>
func (r *repoMock) GetTaskByID(id int) (task model.Task, err error) <span class="cov8" title="1">{
        return r.getTaskByID(id)
}</span>
func (r *repoMock) UpdateTaskByID(id int, task model.Task) error <span class="cov8" title="1">{
        return r.updateTaskByID(id, task)
}</span>
func (r *repoMock) DeleteTaskByID(id int) error <span class="cov8" title="1">{
        return r.deleteTaskByID(id)
}</span>
func (r *repoMock) CompleteTaskByID(id int, task model.Task) error <span class="cov8" title="1">{
        return r.completeTaskByID(id, task)
}</span>
</pre>
		
		<pre class="file" id="file4" style="display: none">package service

import "github.com/arifwidiasan/todo-app/model"

func (s *svcUser) CreateTaskService(activity_id uint, task model.Task) error <span class="cov8" title="1">{
        task.Task_Done = false
        task.ActivityID = activity_id

        return s.repo.CreateTask(task)
}</span>

func (s *svcUser) DeleteAllTaskService(activity_id int) error <span class="cov8" title="1">{
        return s.repo.DeleteAllTask(activity_id)
}</span>

func (s *svcUser) GetAllTaskService(activity_id int) []model.Task <span class="cov8" title="1">{
        return s.repo.GetAllTask(activity_id)
}</span>

func (s *svcUser) GetTaskByIDService(id int) (model.Task, error) <span class="cov8" title="1">{
        return s.repo.GetTaskByID(id)
}</span>

func (s *svcUser) UpdateTaskService(id int, task model.Task) error <span class="cov8" title="1">{
        return s.repo.UpdateTaskByID(id, task)
}</span>

func (s *svcUser) DeleteTaskByIDService(id int) error <span class="cov8" title="1">{
        return s.repo.DeleteTaskByID(id)
}</span>

func (s *svcUser) CompleteTaskService(id int, task model.Task) error <span class="cov8" title="1">{
        return s.repo.CompleteTaskByID(id, task)
}</span>
</pre>
		
		<pre class="file" id="file5" style="display: none">package service

import (
        "net/http"

        "github.com/arifwidiasan/todo-app/helper"
        "github.com/arifwidiasan/todo-app/model"
)

func (s *svcUser) CreateUserService(user model.User) error <span class="cov8" title="1">{
        return s.repo.CreateUsers(user)
}</span>

func (s *svcUser) GetUserByIDService(id int) (model.User, error) <span class="cov8" title="1">{
        return s.repo.GetUserByID(id)
}</span>

func (s *svcUser) GetUserByUsernameService(username string) (model.User, error) <span class="cov8" title="1">{
        return s.repo.GetUserByUsername(username)
}</span>

func (s *svcUser) LoginUser(username, password string) (string, int) <span class="cov0" title="0">{
        user, _ := s.repo.GetUserByUsername(username)

        if user.User_pass != password </span><span class="cov0" title="0">{
                return "", http.StatusUnauthorized
        }</span>

        <span class="cov0" title="0">token, err := helper.CreateToken(int(user.ID), user.Username, s.c.JWT_KEY)
        if err != nil </span><span class="cov0" title="0">{
                return "", http.StatusInternalServerError
        }</span>

        <span class="cov0" title="0">return token, http.StatusOK</span>
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
